(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{28:function(e,t,a){e.exports=a(59)},38:function(e,t,a){},39:function(e,t,a){},44:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),l=a.n(c),o=a(7),s=a(4),m=a(1),u=(a(33),a(34),a(38),a(39),function(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"navbar-container"},r.a.createElement(o.c,{className:"navbar-item is-tab",activeClassName:"is-active",to:"/",exact:!0},"Home"),r.a.createElement(o.c,{className:"navbar-item is-tab",to:"/people",activeClassName:"is-active"},"People")))}),i=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Home Page"))},b=function(){return r.a.createElement("h2",null,"Page not found")},d=a(8),p=a(2),f=a(15),h=(a(44),{Name:{name:"Name",isSortable:!0},Sex:{name:"Sex",isSortable:!0},Born:{name:"Born",isSortable:!0},Died:{name:"Died",isSortable:!0},Father:{name:"Father",isSortable:!1},Mother:{name:"Mother",isSortable:!1}}),E={name:"",sex:"",born:0,died:0,fatherName:"",motherName:"",slug:""};function j(e,t){var a=Object(f.a)(t);return e&&(a=t.filter((function(t){return t.name.toLowerCase().includes(e)||((t.fatherName||"")+(t.motherName||"")).toLowerCase().includes(e)}))),a}function O(e,t,a){var n=Object(f.a)(e);switch(t){case h.Name.name:n.sort((function(e,t){return e.name.localeCompare(t.name)}));break;case h.Sex.name:n.sort((function(e,t){return e.sex.localeCompare(t.sex)}));break;case h.Born.name:n.sort((function(e,t){return e.born-t.born}));break;case h.Died.name:n.sort((function(e,t){return e.died-t.died}))}return"desc"===a&&n.reverse(),n}var g=function(e,t,a){return e.filter((function(e){return e.sex===t&&e.died>a}))},v=function(e){return e>=1400&&e<=2021},N=function(e){var t=e.people,a=e.setPeople,c=Object(n.useState)([]),l=Object(s.a)(c,2),o=l[0],u=l[1],i=Object(n.useState)([]),b=Object(s.a)(i,2),h=b[0],j=b[1],O=Object(n.useState)(E),N=Object(s.a)(O,2),S=N[0],y=N[1],C=Object(m.g)();Object(n.useEffect)((function(){u(g(t,"m",S.born)),j(g(t,"f",S.born))}),[S.born,t]);var k=Object(n.useState)({name:!0,sex:!0,born:!0,died:!0}),x=Object(s.a)(k,2),w=x[0],P=x[1],B=Object(n.useState)(!0),L=Object(s.a)(B,2),F=L[0],_=L[1],D=Object(n.useCallback)((function(){a([].concat(Object(f.a)(t),[Object(p.a)(Object(p.a)({},S),{},{slug:"".concat(S.name.toLowerCase().split(" ").join("_"),"_").concat(S.born)})])),C.push("/people")}),[C,S,a,t]),R=function(e){var t,a=e.target,n=a.name,r=a.value;switch(n){case"born":P(Object(p.a)(Object(p.a)({},w),{},Object(d.a)({},n,v(Number(e.target.value))))),y(Object(p.a)(Object(p.a)({},S),{},Object(d.a)({},n,Number(r))));break;case"died":_((t=Number(e.target.value)-S.born)>=0&&t<150),P(Object(p.a)(Object(p.a)({},w),{},Object(d.a)({},n,v(Number(e.target.value))))),y(Object(p.a)(Object(p.a)({},S),{},Object(d.a)({},n,Number(r))));break;case"name":P(Object(p.a)(Object(p.a)({},w),{},Object(d.a)({},n,function(e){return/^[a-zA-Z\s]*$/.test(e)}(r)))),y(Object(p.a)(Object(p.a)({},S),{},Object(d.a)({},n,r)));break;default:y(Object(p.a)(Object(p.a)({},S),{},Object(d.a)({},n,r)))}};return r.a.createElement("form",{className:"NewPerson"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name"},"Name",r.a.createElement("input",{id:"name",name:"name",type:"text",className:w.name?"":"error",placeholder:"Input full name...",onChange:R})),!w.name&&r.a.createElement("p",null,"Name should contain only letters and spaces")),r.a.createElement("div",{className:"sex"},"Sex:",r.a.createElement("label",{htmlFor:"sex-m"},"M",r.a.createElement("input",{type:"radio",name:"sex",id:"sex-m",value:"m",onChange:R})),r.a.createElement("label",{htmlFor:"sex-f"},"F",r.a.createElement("input",{type:"radio",name:"sex",id:"sex-f",value:"f",onChange:R}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"born"},"Born",r.a.createElement("input",{id:"born",name:"born",className:w.born&&F?"":"error",type:"number",onChange:R})),!w.born&&r.a.createElement("p",null,"Years have be between 1400 and the current year ")),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"died"},"Died",r.a.createElement("input",{id:"died",name:"died",className:w.died&&F?"":"error",type:"number",disabled:!S.born,onChange:R})),!w.died&&r.a.createElement("p",null,"Years have be between 1400 and the current year "),!F&&r.a.createElement("p",null,"Not entered correctly born or died year")),r.a.createElement("div",null,r.a.createElement("label",null,"Father:",r.a.createElement("select",{name:"fatherName",disabled:!S.born,defaultValue:"",onChange:R},r.a.createElement("option",{key:"0",value:""},"Selected father"),o.map((function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)}))))),r.a.createElement("div",null,r.a.createElement("label",null,"Mother:",r.a.createElement("select",{name:"motherName",defaultValue:"",disabled:!S.born,onChange:R},r.a.createElement("option",{key:"0",value:""},"Selected mother"),h.map((function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)}))))),r.a.createElement("input",{type:"submit",value:"Add person",onClick:D}))},S=a(27),y=a.n(S),C=(a(53),function(e){var t=e.person,a=Object(m.h)().search,c=new URLSearchParams(a),l=Object(m.g)(),o=Object(n.useCallback)((function(){c.set("slug",(null===t||void 0===t?void 0:t.slug)||""),l.push("?".concat(c.toString()))}),[l,c,t]);return r.a.createElement("span",{className:"f"===(null===t||void 0===t?void 0:t.sex)?"women":"men",onClick:o,onKeyDown:o,role:"button",tabIndex:0},null===t||void 0===t?void 0:t.name)}),k=(a(54),function(e){var t=e.person;return r.a.createElement("ul",null,r.a.createElement("li",{className:"parents-info"},"Name:",r.a.createElement(C,{person:t})),r.a.createElement("li",{className:"parents-info"},"Sex:",null===t||void 0===t?void 0:t.sex),r.a.createElement("li",{className:"parents-info"},"Born:",null===t||void 0===t?void 0:t.born),r.a.createElement("li",{className:"parents-info"},"Died:",null===t||void 0===t?void 0:t.died))}),x=a(14),w=a.n(x),P=(a(55),function(e){var t=e.people,a=e.initialList,c=Object(m.h)(),l=new URLSearchParams(c.search),o=Object(n.useState)(l.get("slug")),u=Object(s.a)(o,2),i=u[0],b=u[1];return Object(n.useEffect)((function(){b(l.get("slug"))}),[l]),r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement("tr",{id:e.slug,key:e.slug,className:w()({selected:e.slug===i})},Object.keys(e).map((function(t){var n;return"slug"!==t&&r.a.createElement("td",{key:t,className:w()({"selected-collumn":(null===(n=l.get("sortBy"))||void 0===n?void 0:n.toLowerCase())===t})},"name"===t&&r.a.createElement(C,{person:e}),("born"===t||"sex"===t||"died"===t)&&e[t],"fatherName"===t&&e.fatherName&&(a.find((function(t){return t.name===e.fatherName}))?r.a.createElement(k,{person:a.find((function(t){return t.name===e.fatherName}))}):r.a.createElement("p",{className:"person"},e.fatherName)),"motherName"===t&&e.motherName&&(a.find((function(t){return t.name===e.motherName}))?r.a.createElement(k,{person:a.find((function(t){return t.name===e.motherName}))}):r.a.createElement("p",{className:"person"},e.motherName)))})))})))}),B=(a(56),a(57),function(e){var t=e.people,a=e.setPeople,c=Object(n.useState)({Name:"both",Sex:"both",Born:"both",Died:"both"}),l=Object(s.a)(c,2),o=l[0],u=l[1],i=Object(m.g)(),b=Object(m.h)(),f=new URLSearchParams(b.search),E=Object(n.useCallback)((function(){a(O(t,f.get("sortBy")||"",f.get("sortOrder")||""))}),[t,f,a]);Object(n.useEffect)((function(){f.has("sortBy")&&(f.set("sortOrder",o[f.get("sortBy")||""]),i.location.search!=="?".concat(f.toString())&&(i.push("?".concat(f.toString())),E()))}),[o,f,i,E]);var j=Object(n.useCallback)((function(e){h[e].isSortable?(f.set("sortBy",e),u(Object(p.a)(Object(p.a)({},o),{},Object(d.a)({},e,"desc"===o[e]||"both"===o[e]?"asc":"desc")))):(f.delete("sortBy"),f.delete("sortOrder")),i.location.search!=="?".concat(f.toString())&&i.push("?".concat(f.toString()))}),[i,f,o]);return r.a.createElement("tr",null,Object.values(h).map((function(e){return r.a.createElement("td",{key:e.name,onClick:function(){return j(e.name)},className:w()({"selected-title":e.name===f.get("sortBy")})},e.name,e.name===f.get("sortBy")?e.isSortable&&r.a.createElement("img",{src:"images/sort_".concat(o[e.name],".png"),alt:"sort_".concat(o[e.name])}):e.isSortable&&r.a.createElement("img",{src:"images/sort_both.png",alt:"sort_both"}))})))}),L=function(e){var t=e.people,a=e.setPeople,c=e.error,l=Object(n.useState)(void 0),o=Object(s.a)(l,2),u=o[0],i=o[1],b=Object(n.useState)(!1),d=Object(s.a)(b,2),p=d[0],f=d[1],h=Object(m.g)(),E=Object(m.h)(),g=new URLSearchParams(E.search),v=g.get("query")||"",N=Object(n.useState)(v),S=Object(s.a)(N,2),C=S[0],x=S[1],w=Object(n.useCallback)(y()((function(e){e?g.set("query",e):g.delete("query"),h.location.search!=="?".concat(g.toString())&&h.push("?".concat(g.toString()))}),500),[g,h]),L=Object(n.useCallback)((function(e){x(e.target.value),w(e.target.value)}),[w]),F=Object(n.useCallback)((function(){return g.get("sortBy")?O(j(v.toLowerCase(),t),g.get("sortBy")||"",g.get("sortOrder")||""):j(v.toLowerCase(),t)}),[v,t,g]);return Object(n.useEffect)((function(){g.get("slug")!==(null===u||void 0===u?void 0:u.slug)&&(i(t.find((function(e){return e.slug===g.get("slug")}))),void 0===t.find((function(e){return e.slug===g.get("slug")}))&&g.has("slug")&&(g.delete("slug"),h.location.search!=="?".concat(g.toString())&&h.push("?".concat(g.toString()))))}),[g,t,u,h]),r.a.createElement("div",{className:"PeoplePage"},r.a.createElement("div",{className:"form-info"},r.a.createElement("div",{className:"Filtering"},r.a.createElement("input",{type:"text",className:"search",value:C,placeholder:"Search.....",onChange:L})),u&&r.a.createElement("div",{className:"info"},r.a.createElement("h2",null,"Selected Person: "),r.a.createElement(k,{person:u})),!p&&r.a.createElement("button",{type:"button",onClick:function(){f(!0),h.push("/people/new")}},"Add person")),r.a.createElement("table",{className:"PeopleTable"},r.a.createElement("thead",null,r.a.createElement(B,{people:t,setPeople:a})),r.a.createElement("tbody",null,c?r.a.createElement("p",null,c):r.a.createElement(P,{people:F(),initialList:t}))))},F=function(){return fetch("https://mate-academy.github.io/react_people-table/api/people.json").then((function(e){return e.json()}))},_=(a(58),function(){return r.a.createElement("img",{alt:"Loader...",src:"https://cutt.ly/sjRJK6w"})}),D=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),d=Object(s.a)(l,2),p=d[0],f=d[1],h=Object(n.useState)(""),E=Object(s.a)(h,2),j=E[0],O=E[1];return Object(n.useEffect)((function(){f(!0),F().then((function(e){c(e),f(!1)})).catch((function(e){return O(e)}))}),[]),r.a.createElement(o.b,null,r.a.createElement("div",{className:"App"},r.a.createElement(u,null),r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/people/new"},r.a.createElement("div",{className:"form-popup"},r.a.createElement(N,{people:a,setPeople:c}))),r.a.createElement(m.b,{path:"/people"},r.a.createElement("h2",null,"People page"),p?r.a.createElement(_,null):r.a.createElement(L,{people:a,setPeople:c,error:j})),r.a.createElement(m.b,{path:"/",exact:!0},r.a.createElement(i,null)),r.a.createElement(m.a,{path:"/home",to:"/"}),r.a.createElement(b,null))))};l.a.render(r.a.createElement(o.a,null,r.a.createElement(D,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.daaf40f0.chunk.js.map